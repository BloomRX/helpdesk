@model Helpdesk.Api.Models.Solicitacao

<h2>@Model.Titulo</h2>
<p>@Model.Descricao</p>
<p><i>Por @Model.EmailUsuario em @Model.DataAbertura.ToShortDateString()</i></p>

@if (Model.EmailUsuario == Context.Session.GetString("UsuarioEmail") ||
     Context.Session.GetString("UsuarioTipo") == "Admin")
{
    <a asp-action="Editar" asp-route-id="@Model.Id">Editar</a>
    <form asp-action="Excluir" asp-route-id="@Model.Id" method="post">
        <button type="submit" onclick="return confirm('Excluir esta solicitação?')">Excluir</button>
    </form>
}

<hr />
<h3>Respostas:</h3>
@foreach (var r in Model.Respostas)
{
    <p><b>@r.EmailUsuario</b>: @r.Conteudo</p>
}

<hr />
<h4>Responder:</h4>
<form asp-action="Responder" method="post">
    <input type="hidden" name="solicitacaoId" value="@Model.Id" />
    <textarea name="conteudo" required></textarea><br />
    <button type="submit">Enviar</button>
</form>
